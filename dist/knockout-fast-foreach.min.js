!function(e,t){"function"==typeof define&&define.amd?define(["knockout"],t):"object"==typeof exports?module.exports=t(require("knockout")):e.KnockoutElse=t(e.ko)}(this,function(e){function t(e){return!!e&&"object"==typeof e&&e.constructor===Object}function n(t){var n,i=document.createElement("div");return t.content?n=t.content:"SCRIPT"===t.tagName?(n=document.createElement("div"),n.innerHTML=t.text):n=t,e.utils.arrayForEach(e.virtualElements.childNodes(n),function(e){e&&i.insertBefore(e.cloneNode(!0),null)}),i}function i(t){var i=this;this.element=t.element,this.$context=t.$context,this.data=t.data,this.as=t.as,this.templateNode=n(t.name?document.getElementById(t.name).cloneNode(!0):t.element),this.changeQueue=[],this.startNodesList=[],this.rendering_queued=!1,e.virtualElements.emptyNode(this.element);var s=0;e.utils.arrayForEach(e.unwrap(this.data),function(e){i.changeQueue.push({index:s++,status:"added",value:e})}),s>0&&this.registerChange(),e.isObservable(this.data)&&(this.data.indexOf||(this.data=this.data.extend({trackArrayChanges:!0})),this.changeSubs=this.data.subscribe(this.onArrayChange,this,"arrayChange"))}i.animateFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return window.setTimeout(e,1e3/60)},i.prototype.dispose=function(){this.changeSubs.dispose()},i.prototype.onArrayChange=function(t){var n=this;e.utils.arrayForEach(t,function(e){n.changeQueue.push(e)}),this.registerChange()},i.prototype.registerChange=function(){var e=this;this.rendering_queued||(this.rendering_queued=!0,i.animateFrame.call(window,function(){e.processQueue()}))},i.prototype.processQueue=function(){var t=this;e.utils.arrayForEach(this.changeQueue,function(e){t[e.status](e.index,e.value)}),this.changeQueue=[],this.rendering_queued=!1},i.prototype.added=function(t,n){var i=this.$context.createChildContext(n,this.as||null),s=this.startNodesList[t-1]||null,a=this.templateNode.cloneNode(!0),o=e.virtualElements.childNodes(a);this.startNodesList.splice(t,0,o[o.length-1]),e.applyBindingsToDescendants(i,a);for(var r=o.length-1;r>=0;--r){var u=o[r];if(!u)return;e.virtualElements.insertAfter(this.element,u,s)}},i.prototype.deleted=function(e){var t=this.startNodesList[e],n=this.startNodesList[e+1];for(this.element.removeChild(t);(t=t.nextSibling)&&t!==n;)this.element.removeChild(t);this.startNodesList.splice(e,1)},e.bindingHandlers.fastForEach={init:function(n,s,a,o,r){var u,d=s();return t(d)?(d.element=d.element||n,d.$context=r,u=new i(d)):u=new i({element:n,data:d,$context:r}),e.utils.domNodeDisposal.addDisposeCallback(n,function(){u.dispose()}),{controlsDescendantBindings:!0}},FastForEach:i},e.virtualElements.allowedBindings.fastForEach=!0});