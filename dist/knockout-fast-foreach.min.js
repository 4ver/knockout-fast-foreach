!function(e,t){"function"==typeof define&&define.amd?define(["knockout"],t):"object"==typeof exports?module.exports=t(require("knockout")):e.KnockoutElse=t(e.ko)}(this,function(e){function t(e){return!!e&&"object"==typeof e&&e.constructor===Object}function n(t){var n=this;for(this.element=t.element,this.$context=t.$context,this.data=t.data,this.as=t.as,this.templateNode=t.name?[document.getElementById(t.name)]:t.element.cloneNode(!0),this.changeQueue=[],this.startNodesList=[],this.rendering_queued=!1,e.isObservable(this.data)&&!this.data.indexOf&&(this.data=this.data.extend({trackArrayChanges:!0}));this.element.firstChild;)this.element.removeChild(this.element.firstChild);var i=0;e.utils.arrayForEach(this.data(),function(e){n.changeQueue.push({index:i++,status:"added",value:e})}),i>0&&this.registerChange(),this.changeSubs=this.data.subscribe(this.on_array_change,this,"arrayChange")}function i(i,s,o,a,r){var u,h=s();try{t(h)?(h.element=h.element||i,h.$context=r,u=new n(h)):u=new n({element:i,data:h,$context:r})}catch(d){console.error("FF error",d.stack)}return e.utils.domNodeDisposal.addDisposeCallback(i,function(){u.dispose()}),{controlsDescendantBindings:!0}}return n.animateFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return window.setTimeout(e,1e3/60)},n.prototype.dispose=function(){this.changeSubs.dispose()},n.prototype.on_array_change=function(t){var n=this;e.utils.arrayForEach(t,function(e){n.changeQueue.push(e)}),this.registerChange()},n.prototype.registerChange=function(){var e=this;this.rendering_queued||(this.rendering_queued=!0,n.animateFrame.call(window,function(){e.processQueue()}))},n.prototype.processQueue=function(){var t=this;e.utils.arrayForEach(this.changeQueue,function(e){t[e.status](e.index,e.value)}),this.changeQueue.length=0,this.rendering_queued=!1},n.prototype.added=function(t,n){var i=this.$context.createChildContext(n,this.as||null),s=this.startNodesList[t]||null,o=null,a=this.element;e.utils.arrayForEach(this.templateNode.children,function(t){if(t){var n=t.cloneNode(!0);a.insertBefore(n,s),e.applyBindingsToDescendants(i,n),o=o||n}}),this.startNodesList.splice(t,0,o)},n.prototype.deleted=function(e){var t=this.startNodesList[e],n=this.startNodesList[e+1];for(this.element.removeChild(t);(t=t.nextSibling)&&t!=n;)this.element.removeChild(t);this.startNodesList.splice(e,1)},n.prototype.after_process_queue=function(){},e.bindingHandlers.fastForEach={init:i},{init:i}});